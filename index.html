<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta name="robots" content="noindex">
  <title>üéì–î–ª—è –æ–¥–Ω–æ–≥—Ä—É–ø–ø–Ω–∏–∫–æ–≤</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
:root {
  --primary: #ff6699;
  --secondary: #8a53ff;
  --accent: #48d1cc;
  --bg: #fcf9f2;
  --card-bg: #fff5f0;
  --text: #000;
  --shadow: rgba(0,0,0,0.2);
  --border-radius: 16px;
  --transition: all 0.3s ease;
}

.dark-theme {
  --bg: #121212;
  --card-bg: #1e1e1e;
  --text: #fff;
  --shadow: rgba(0,0,0,0.4);
}

* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', system-ui, sans-serif; }
body { background: var(--bg); color: var(--text); line-height: 1.5; transition: var(--transition); }
header { 
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  padding: 0.8rem 1.4rem;
  box-shadow: 0 3px 15px var(--shadow);
  position: sticky;
  top: 0;
  z-index: 100;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.9rem;
  flex-wrap: wrap;
  height: 60px;
}
.theme-toggle {
  background: rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(10px);
  border: none;
  color: white;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  font-size: 14px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition);
}
.theme-toggle:hover {
  background: rgba(255,255,255,0.5);
  transform: rotate(15deg) scale(1.1);
}
.nav-btn, .week-toggle-btn {
  background: rgba(255, 255, 255, 0.35);
  backdrop-filter: blur(10px);
  border: none;
  color: white;
  padding: 0.6rem 1.2rem;
  margin: 0;
  border-radius: 55px;
  font-weight: 700;
  font-size: 1.05rem;
  cursor: pointer;
  transition: var(--transition);
  white-space: nowrap;
  flex-shrink: 0;
  min-width: 100px;
  text-align: center;
  box-shadow: 0 3px 12px var(--shadow);
}
.nav-btn:hover, .nav-btn.active, .week-toggle-btn:hover, .week-toggle-btn.active {
  background: white;
  color: var(--primary);
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 6px 18px var(--shadow);
}
@media (max-width: 768px) {
  header { 
    padding: 0.5rem 1rem; 
    height: 50px; 
    gap: 0.6rem;
  }
  .nav-btn, .week-toggle-btn {
    padding: 0.4rem 0.8rem;
    font-size: 0.9rem;
    min-width: 60px;
  }
  .theme-toggle {
    width: 30px;
    height: 30px;
    font-size: 12px;
  }
}
main { max-width: 1200px; margin: 1.8rem auto; padding: 0 1.2rem; }
.section { display: none; animation: fadeIn 0.6s ease; }
.section.active { display: block; }
h2 { margin: 1.8rem 0 1.4rem; color: var(--text); font-size: 1.7rem; font-weight: 750; display: flex; align-items: center; gap: 12px; }
p, li { font-size: 1.05rem; font-weight: 550; color: var(--text); }
.today-tomorrow { display: flex; gap: 1.2rem; flex-wrap: wrap; }
.day-column { flex: 1; min-width: 260px; }
.day-header { 
  background: linear-gradient(to right, var(--primary), var(--accent));
  color: white;
  padding: 0.9rem;
  border-radius: var(--border-radius) var(--border-radius) 0 0;
  font-weight: 750;
  text-align: center;
  font-size: 1.15rem;
  box-shadow: 0 3px 8px var(--shadow);
  animation: pulse 2s infinite;
}
@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
}
.lesson-card {
  background: var(--card-bg);
  border-radius: 0 0 var(--border-radius) var(--border-radius);
  padding: 1.1rem;
  margin-bottom: 1.1rem;
  box-shadow: 0 6px 18px var(--shadow);
  transition: var(--transition);
  color: var(--text);
  border-left: 4px solid var(--accent);
}
.lesson-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 22px var(--shadow);
  border-left: 4px solid var(--primary);
}
.lesson-time {
  font-size: 1.02rem;
  color: var(--accent);
  margin-bottom: 0.3rem;
  display: flex;
  align-items: center;
  gap: 6px;
  font-weight: 700;
}
.lesson-title {
  font-weight: 800;
  color: var(--text);
  margin-bottom: 0.3rem;
  font-size: 1.3rem;
  transition: color 0.3s ease;
}
.lesson-title[data-type="–ª–µ–∫—Ü–∏—è"] {
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  -webkit-background-clip: text;
  color: transparent;
}
.lesson-title[data-type="–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è"] {
  background: linear-gradient(135deg, var(--accent), var(--secondary));
  -webkit-background-clip: text;
  color: transparent;
}
.lesson-title[data-type="–ø—Ä–∞–∫—Ç–∏–∫–∞"] {
  background: linear-gradient(135deg, var(--secondary), var(--accent));
  -webkit-background-clip: text;
  color: transparent;
}
.lesson-meta { font-size: 0.95rem; color: var(--text); margin-bottom: 0.5rem; font-weight: 600; }
.dark-theme .lesson-meta {
  color: #ccc !important; /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π –¥–ª—è –ª—É—á—à–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏ */
  text-shadow: 0 1px 2px rgba(0,0,0,0.2);
}
.hw-toggle {
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  color: white;
  border: none;
  padding: 0.45rem 1rem;
  border-radius: 22px;
  font-size: 0.92rem;
  cursor: pointer;
  margin-top: 0.6rem;
  transition: var(--transition);
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 7px;
  box-shadow: 0 3px 10px var(--shadow);
}
.hw-toggle:hover {
  opacity: 0.95;
  transform: scale(1.03);
}
.hw-content {
  margin-top: 0.8rem;
  padding: 0.9rem;
  background: var(--bg);
  border-radius: 10px;
  display: none;
  font-size: 1.02rem;
  border-left: 3px solid var(--accent);
  color: var(--text);
  font-weight: 550;
  box-shadow: 0 4px 12px var(--shadow);
}
.hw-checkbox { display: flex; align-items: center; gap: 10px; margin-top: 0.7rem; }
.hw-checkbox input { width: 20px; height: 20px; cursor: pointer; }
.hw-checkbox label { font-size: 0.98rem; font-weight: 550; cursor: pointer; }
.full-schedule-list, .homework-list, .lectures-list {
  display: flex;
  flex-direction: column;
  gap: 1.3rem;
}
.schedule-item, .homework-date, .lecture-subject-card {
  background: var(--card-bg);
  padding: 1.3rem;
  border-radius: var(--border-radius);
  box-shadow: 0 5px 15px var(--shadow);
  color: var(--text);
  transition: transform 0.2s;
}
.schedule-item:hover, .homework-date:hover, .lecture-subject-card:hover {
  transform: translateY(-5px);
}
.schedule-week-header {
  background: linear-gradient(to right, var(--secondary), var(--primary));
  color: white;
  padding: 0.8rem;
  border-radius: var(--border-radius);
  margin-bottom: 1.1rem;
  text-align: center;
  font-weight: 750;
  font-size: 1.3rem;
  animation: wave 4s infinite;
}
@keyframes wave {
  0% { transform: scale(1); }
  50% { transform: scale(1.03); }
  100% { transform: scale(1); }
}
.homework-date h3 { margin-bottom: 0.8rem; color: var(--primary); font-size: 1.5rem; font-weight: 750; }
.homework-item { margin-top: 0.8rem; padding-left: 1.2rem; border-left: 3px solid var(--accent); color: var(--text); font-size: 1.05rem; font-weight: 550; }
.solution-toggle {
  background: linear-gradient(135deg, var(--secondary), var(--primary));
  color: white;
  border: none;
  padding: 0.4rem 0.8rem;
  border-radius: 20px;
  font-size: 0.88rem;
  cursor: pointer;
  margin-top: 0.5rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 6px;
  box-shadow: 0 2px 8px var(--shadow);
}
.solution-content {
  margin-top: 0.7rem;
  padding: 0.75rem;
  background: var(--bg);
  border-radius: 10px;
  display: none;
  font-size: 1.02rem;
}
footer {
  text-align: center;
  padding: 2.2rem;
  margin-top: 3rem;
  color: #aaa;
  font-size: 1.02rem;
  border-top: 1px solid var(--card-bg);
  font-weight: 550;
}
.lecture-toggle {
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  color: white;
  border: none;
  padding: 1.1rem 1.8rem;
  border-radius: 20px;
  font-size: 1.3rem;
  font-weight: 750;
  cursor: pointer;
  width: 100%;
  text-align: left;
  margin-bottom: 1.3rem;
  transition: all 0.4s ease;
  box-shadow: 0 5px 18px var(--shadow);
  position: relative;
  overflow: hidden;
  display: flex;
  align-items: center;
}
.lecture-toggle:hover {
  transform: translateY(-4px) scale(1.03);
  box-shadow: 0 7px 25px var(--shadow);
}
.lecture-toggle::after {
  content: "‚ñº";
  position: absolute;
  right: 1.4rem;
  top: 50%;
  transform: translateY(-50%);
  font-size: 1.05rem;
  opacity: 0.9;
  transition: transform 0.3s ease;
}
.lecture-toggle.active::after {
  content: "‚ñ≤";
}
.lecture-list {
  display: none;
  margin-top: 0.8rem;
  padding-left: 1.4rem;
  border-left: 3px solid var(--secondary);
}
.lecture-item {
  margin: 0.7rem 0;
  font-size: 1.05rem;
  font-weight: 550;
  transition: all 0.2s;
}
.lecture-item:hover {
  color: var(--primary);
  transform: translateX(5px);
}
.lecture-details {
  margin-top: 0.8rem;
  padding: 0.8rem;
  background: var(--bg);
  border-radius: 10px;
  display: none;
  font-size: 1.02rem;
  border-left: 3px solid var(--accent);
  color: var(--text);
  font-weight: 550;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px var(--shadow);
}
.lecture-details img {
  max-width: 100%;
  height: auto;
  border-radius: 10px;
  margin-top: 0.7rem;
  box-shadow: 0 4px 10px var(--shadow);
}
.lecture-details-toggle {
  background: linear-gradient(135deg, var(--accent), var(--primary));
  color: white;
  border: none;
  padding: 0.45rem 1rem;
  border-radius: 22px;
  font-size: 0.92rem;
  cursor: pointer;
  margin-top: 0.5rem;
  margin-left: 1.2rem;
  transition: var(--transition);
  font-weight: 700;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  box-shadow: 0 3px 10px var(--shadow);
}
.lecture-details-toggle:hover {
  opacity: 0.9;
  transform: scale(1.03);
}
.lecture-details .highlight {
  font-weight: 800;
  margin: 0 4px;
  color: var(--primary);
}
body:not(.dark-theme) .lecture-details .highlight {
  color: #000;
}
body.dark-theme .lecture-details .highlight {
  color: var(--primary);
}
/* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è */
.schedule-item {
  position: relative;
  padding: 1.5rem;
  border-left: 3px solid var(--accent);
  overflow: hidden;
}
.schedule-item::before {
  content: '';
  position: absolute;
  left: -16px;
  top: 1.5rem;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--primary);
}
.schedule-item::after {
  content: '';
  position: absolute;
  left: -16px;
  bottom: 1.5rem;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--secondary);
}
.schedule-item p {
  margin: 0.6rem 0;
  border-left: 2px solid var(--accent);
  padding-left: 1rem;
}
.schedule-item p strong {
  font-weight: 700;
  color: var(--text);
}
.schedule-item p small {
  font-size: 0.9rem;
  color: #777;
  display: block;
  margin-top: 0.3rem;
}
  </style>
</head>
<body>
<header>
  <nav>
    <button class="nav-btn active" data-tab="home">–ì–ª–∞–≤–Ω–∞—è</button>
    <button class="nav-btn" data-tab="schedule">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</button>
    <button class="nav-btn" data-tab="homework">–î–ó</button>
    <button class="nav-btn" data-tab="lectures">–õ–µ–∫—Ü–∏–∏</button>
  </nav>
  <button class="theme-toggle" id="themeToggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
    <i class="fas fa-moon"></i>
  </button>
</header>
<main>
  <section id="home" class="section active">
    <h1>–î–µ–ª–∞–µ—Ç—Å—è</h1>
    <div class="today-tomorrow">
      <div class="day-column">
        <div class="day-header" id="today-header">–°–µ–≥–æ–¥–Ω—è</div>
        <div id="today-schedule"></div>
      </div>
      <div class="day-column">
        <div class="day-header" id="tomorrow-header">–ó–∞–≤—Ç—Ä–∞</div>
        <div id="tomorrow-schedule"></div>
      </div>
    </div>
    <h2><i class="fas fa-graduation-cap"></i> –£—á–µ–±–Ω—ã–π –ø–ª–∞–Ω</h2>
    <p>1</p>
    <h2><i class="fas fa-info-circle"></i> –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
    <p>1</p>
    <h2><i class="fas fa-tasks"></i> –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è</h2>
    <p>–ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –∏–∑:</p>
    <ul style="margin-left: 2rem; margin-top: 0.8rem;">
      <li>50% ‚Äî –ø–æ—Å–µ—â–µ–Ω–∏–µ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ –ø–∞—Ä–∞—Ö</li>
      <li>50% ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞—á—ë—Ç–∞</li>
    </ul>
    <p style="margin-top: 1.5rem;"><strong>–®–∫–∞–ª–∞ –æ—Ü–µ–Ω–æ–∫:</strong></p>
    <ul style="margin-left: 2rem;">
      <li>–Ω–∏–∂–µ 56 –±–∞–ª–ª–æ–≤ ‚Äî –Ω–µ —Å–¥–∞–ª ‚ùå</li>
      <li>56‚Äì70 ‚Äî –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ ‚úÖ</li>
      <li>71‚Äì85 ‚Äî –•–æ—Ä–æ—à–æ ‚úÖ</li>
      <li>86‚Äì100 ‚Äî –û—Ç–ª–∏—á–Ω–æ ‚úÖ</li>
    </ul>
  </section>
  <section id="schedule" class="section">
    <div style="display: flex; gap: 1rem; margin: 1.8rem 0; justify-content: center; flex-wrap: wrap;">
      <button class="week-toggle-btn active" id="week-upper">–í–µ—Ä—Ö–Ω—è—è –Ω–µ–¥–µ–ª—è</button>
      <button class="week-toggle-btn" id="week-lower">–ù–∏–∂–Ω—è—è –Ω–µ–¥–µ–ª—è</button>
    </div>
    <div class="full-schedule-list" id="full-schedule"></div>
  </section>
  <section id="homework" class="section">
    <h2><i class="fas fa-pen"></i> –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ</h2>
    <div class="homework-list" id="homework-list"></div>
  </section>
  <section id="lectures" class="section">
    <h2><i class="fas fa-book-open"></i> –õ–µ–∫—Ü–∏–∏ –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º</h2>
    <div class="lectures-list" id="lectures-list"></div>
  </section>
</main>
<footer>
  ¬© 2025 –°–¥–µ–ª–∞–Ω–æ —Å ‚ù§ –¥–ª—è –æ–¥–Ω–æ–≥—Ä—É–ø–ø–Ω–∏–∫–æ–≤
</footer>
<script>
  // ===== –¢–ï–ú–ê =====
  const themeToggle = document.getElementById('themeToggle');
  const body = document.body;
  const savedTheme = localStorage.getItem('theme');
  const systemPrefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
  let currentTheme = savedTheme || (systemPrefersDark ? 'dark' : 'light');
  function applyTheme(theme) {
    if (theme === 'dark') {
      body.classList.add('dark-theme');
      themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
      localStorage.setItem('theme', 'dark');
    } else {
      body.classList.remove('dark-theme');
      themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
      localStorage.setItem('theme', 'light');
    }
  }
  applyTheme(currentTheme);
  themeToggle.addEventListener('click', () => {
    currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
    applyTheme(currentTheme);
  });
  
  // ===== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò =====
  function getMoscowDate() {
    const now = new Date();
    const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
    return new Date(utc + (3 * 3600000));
  }
  function formatDate(date) {
    const days = ['–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ', '–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–≤—Ç–æ—Ä–Ω–∏–∫', '—Å—Ä–µ–¥–∞', '—á–µ—Ç–≤–µ—Ä–≥', '–ø—è—Ç–Ω–∏—Ü–∞', '—Å—É–±–±–æ—Ç–∞'];
    const months = ['—è–Ω–≤–∞—Ä—è', '—Ñ–µ–≤—Ä–∞–ª—è', '–º–∞—Ä—Ç–∞', '–∞–ø—Ä–µ–ª—è', '–º–∞—è', '–∏—é–Ω—è', '–∏—é–ª—è', '–∞–≤–≥—É—Å—Ç–∞', '—Å–µ–Ω—Ç—è–±—Ä—è', '–æ–∫—Ç—è–±—Ä—è', '–Ω–æ—è–±—Ä—è', '–¥–µ–∫–∞–±—Ä—è'];
    return `${days[date.getDay()]}, ${date.getDate()} ${months[date.getMonth()]}`;
  }
  function addDays(date, days) {
    const result = new Date(date);
    result.setDate(result.getDate() + days);
    return result;
  }
  function getWeekType(date) {
    const semesterStart = new Date(2024, 8, 2);
    const msInWeek = 7 * 24 * 60 * 60 * 1000;
    const diffTime = date - semesterStart;
    const diffWeeks = Math.floor(diffTime / msInWeek);
    return diffWeeks % 2 === 0 ? 'upper' : 'lower';
  }
  
  // ===== –•–†–ê–ù–ï–ù–ò–ï –í–´–ü–û–õ–ù–ï–ù–ù–´–• –î–ó =====
  function getCompletedTasks() {
    const saved = localStorage.getItem('completedHomework');
    return saved ? JSON.parse(saved) : {};
  }
  function setCompletedTask(key, completed) {
    const tasks = getCompletedTasks();
    tasks[key] = completed;
    localStorage.setItem('completedHomework', JSON.stringify(tasks));
  }
  
  // ===== –î–ê–ù–ù–´–ï –†–ê–°–ü–ò–°–ê–ù–ò–Ø =====
  const scheduleData = {
    upper: {
      1: [
        { time: "08:00‚Äì09:30", subject: "–§–∏–∑–∫—É–ª—å—Ç—É—Ä–∞", type: "–ª–µ–∫—Ü–∏—è", room: "–£–õ–ö-1, –∞—É–¥. 420", teacher: "–ø—Ä–æ—Ñ–µ—Å—Å–æ—Ä –ú–æ—Å–∫–≤–∏–Ω –ù–∏–∫–æ–ª–∞–π –ì–µ–Ω–Ω–∞–¥—å–µ–≤–Ω–∞", hw: "" },
        { time: "09:40‚Äì11:10", subject: "–•–∏–º–∏—è", type: "–ª–µ–∫—Ü–∏—è", room: "–£–õ–ö-1, –∞—É–¥. 420", teacher: "–¥–æ—Ü–µ–Ω—Ç –°–∏–ø–ø–µ–ª—å –ò—Ä–∏–Ω–∞ –Ø–∫–æ–≤–ª–µ–≤–Ω–∞", hw: "" },
        { time: "11:50‚Äì13:20", subject: "–•–∏–º–∏—è", type: "–ª–∞–±.", room: "–£–õ–ö-1, –∞—É–¥. 145/143", teacher: "–¥–æ—Ü–µ–Ω—Ç –°–∏–ø–ø–µ–ª—å –ò—Ä–∏–Ω–∞ –Ø–∫–æ–≤–ª–µ–≤–Ω–∞ / –®–∞—Ä–∞—Ñ—É—Ç–¥–∏–Ω–æ–≤ –†–∞—Ñ–∏–∫ –ù–∏–∑–∞–º—É—Ç–¥–∏–Ω–æ–≤–∏—á", hw: "" },
        { time: "13:30‚Äì15:00", subject: "–•–∏–º–∏—è", type: "–ª–∞–±.", room: "–£–õ–ö-1, –∞—É–¥. 145/143", teacher: "–¥–æ—Ü–µ–Ω—Ç –°–∏–ø–ø–µ–ª—å –ò—Ä–∏–Ω–∞ –Ø–∫–æ–≤–ª–µ–≤–Ω–∞ / –®–∞—Ä–∞—Ñ—É—Ç–¥–∏–Ω–æ–≤ –†–∞—Ñ–∏–∫ –ù–∏–∑–∞–º—É—Ç–¥–∏–Ω–æ–≤–∏—á", hw: "" }
      ],
      2: [
        { time: "08:00‚Äì09:30", subject: "–û—Å–Ω–æ–≤—ã —Ä–æ—Å—Å–∏–π—Å–∫–æ–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏", type: "–ø—Ä–∞–∫—Ç–∏–∫–∞", room: "–£–õ–ö-1, –∞—É–¥. 454", teacher: "–¥–æ—Ü–µ–Ω—Ç –Ø–∫–æ–≤–ª–µ–≤–∞ –ú–∞—Ä–∏–Ω–∞ –ì–µ–Ω–Ω–∞–¥—å–µ–≤–Ω–∞", hw: "" },
        { time: "09:40‚Äì11:10", subject: "–û—Å–Ω–æ–≤—ã —Ä–æ—Å—Å–∏–π—Å–∫–æ–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏", type: "–ø—Ä–∞–∫—Ç–∏–∫–∞", room: "–£–õ–ö-1, –∞—É–¥. 454", teacher: "–¥–æ—Ü–µ–Ω—Ç –Ø–∫–æ–≤–ª–µ–≤–∞ –ú–∞—Ä–∏–Ω–∞ –ì–µ–Ω–Ω–∞–¥—å–µ–≤–Ω–∞", hw: "" },
        { time: "11:50‚Äì13:20", subject: "–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞", type: "–ª–∞–±.", room: "–£–õ–ö-2, –∞—É–¥. 401/418", teacher: "—Å—Ç.–ø—Ä–µ–ø. –ë—É–ª–∞—Ç–æ–≤–∞ –°–≤–µ—Ç–ª–∞–Ω–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞ / –®–∏–≥–∞–ø–æ–≤–∞ –õ.–§.", hw: "" }
      ],
      3: [
        { time: "08:00‚Äì09:30", subject: "–ò—Å—Ç–æ—Ä–∏—è –†–æ—Å—Å–∏–∏", type: "–ø—Ä–∞–∫—Ç–∏–∫–∞", room: "–£–õ–ö-1, –∞—É–¥. 420", teacher: "–¥–æ—Ü–µ–Ω—Ç –ë–µ—Å—Å–æ–Ω–æ–≤–∞ –¢–∞—Ç—å—è–Ω–∞ –í–∏–∫—Ç–æ—Ä–æ–≤–Ω–∞", hw: "" },
        { time: "09:40‚Äì11:10", subject: "–ò—Å—Ç–æ—Ä–∏—è –†–æ—Å—Å–∏–∏", type: "–ª–µ–∫—Ü–∏—è", room: "–£–õ–ö-1, –∞—É–¥. 414", teacher: "–¥–æ—Ü–µ–Ω—Ç –ë–µ—Å—Å–æ–Ω–æ–≤–∞ –¢–∞—Ç—å—è–Ω–∞ –í–∏–∫—Ç–æ—Ä–æ–≤–Ω–∞", hw: "" },
        { time: "11:50‚Äì13:20", subject: "–ò–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–π —è–∑—ã–∫ (2 –ø–æ–¥–≥—Ä.)", type: "–ø—Ä–∞–∫—Ç–∏–∫–∞", room: "–£–õ–ö-1, –∞—É–¥. 326", teacher: "–¥–æ—Ü–µ–Ω—Ç –°–ª–∞–≤–∏–Ω–∞ –õ–∏–ª–∏—è –†—É—Å—Ç–∞–º–æ–≤–Ω–∞", hw: "" }
      ],
      5: [
        { time: "08:00‚Äì09:30", subject: "–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑", type: "–ø—Ä–∞–∫—Ç–∏–∫–∞", room: "–£–õ–ö-2, –∞—É–¥. 432", teacher: "–¥–æ—Ü–µ–Ω—Ç –ì—É–±–æ—á–∫–∏–Ω–∞ –ù–∞—Ç–∞–ª—å—è –ò–≤–∞–Ω–æ–≤–Ω–∞", hw: "" },
        { time: "09:40‚Äì11:10", subject: "–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑", type: "–ª–µ–∫—Ü–∏—è", room: "–£–õ–ö-2, –∞—É–¥. 302", teacher: "–¥–æ—Ü–µ–Ω—Ç –ì—É–±–æ—á–∫–∏–Ω–∞ –ù–∞—Ç–∞–ª—å—è –ò–≤–∞–Ω–æ–≤–Ω–∞", hw: "" },
        { time: "11:50‚Äì13:20", subject: "–§–∏–∑–∏—á–µ—Å–∫–∞—è –∫—É–ª—å—Ç—É—Ä–∞ –∏ —Å–ø–æ—Ä—Ç", type: "–ø—Ä–∞–∫—Ç–∏–∫–∞", room: "—Å–ø–æ—Ä—Ç–∫–æ–º–ø–ª–µ–∫—Å, –∞—É–¥. 24", teacher: "–ø—Ä–µ–ø. –ö–∞–º–∞–ª–µ—Ç–¥–∏–Ω–æ–≤ –ú–∞—Ä–∞—Ç –®–∞–≤–∫–∏—Ç–æ–≤–∏—á", hw: "" },
        { time: "13:30‚Äì15:00", subject: "–ò–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–π —è–∑—ã–∫ (1 –ø–æ–¥–≥—Ä.)", type: "–ø—Ä–∞–∫—Ç–∏–∫–∞", room: "–£–õ–ö-4, –∞—É–¥. 208", teacher: "—Å—Ç.–ø—Ä–µ–ø. –ú—É—Å—Ç–∞—Ñ–∏–Ω–∞ –õ–∏–ª–∏—è –†–∞—à–∏–¥–æ–≤–Ω–∞", hw: "" }
      ]
    },
    lower: {
      1: [
        { time: "09:40‚Äì11:10", subject: "–•–∏–º–∏—è", type: "–ª–µ–∫—Ü–∏—è", room: "–£–õ–ö-1, –∞—É–¥. 420", teacher: "–¥–æ—Ü–µ–Ω—Ç –°–∏–ø–ø–µ–ª—å –ò—Ä–∏–Ω–∞ –Ø–∫–æ–≤–ª–µ–≤–Ω–∞", hw: "" },
        { time: "11:50‚Äì13:20", subject: "–û—Å–Ω–æ–≤—ã —Ä–æ—Å—Å–∏–π—Å–∫–æ–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏", type: "–ª–µ–∫—Ü–∏—è", room: "–£–õ–ö-1, –∞—É–¥. 420", teacher: "–¥–æ—Ü–µ–Ω—Ç –Ø–∫–æ–≤–ª–µ–≤–∞ –ú–∞—Ä–∏–Ω–∞ –ì–µ–Ω–Ω–∞–¥—å–µ–≤–Ω–∞", hw: "" }
      ],
      2: [
        { time: "08:00‚Äì09:30", subject: "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ", type: "–ª–∞–±.", room: "–£–õ–ö-2, –∞—É–¥. 405/406", teacher: "—Å—Ç.–ø—Ä–µ–ø. –ë—É–ª–∞—Ç–æ–≤–∞ –°–≤–µ—Ç–ª–∞–Ω–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞ / –®–∏–≥–∞–ø–æ–≤–∞ –õ.–§.", hw: "" },
        { time: "09:40‚Äì11:10", subject: "–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞", type: "–ª–∞–±.", room: "–£–õ–ö-2, –∞—É–¥. 401/418", teacher: "—Å—Ç.–ø—Ä–µ–ø. –ë—É–ª–∞—Ç–æ–≤–∞ –°–≤–µ—Ç–ª–∞–Ω–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞ / –®–∏–≥–∞–ø–æ–≤–∞ –õ.–§.", 
          hw: "–í—ã–ø–æ–ª–Ω–∏—Ç—å –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –ø–æ Excel –∑–∞ –ø–µ—Ä–≤—ã–π —Å–µ–º–µ—Å—Ç—Ä" },
        { time: "11:50‚Äì13:20", subject: "–ò–Ω–∂–µ–Ω–µ—Ä–Ω–∞—è –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è –≥—Ä–∞—Ñ–∏–∫–∞", type: "–ø—Ä–∞–∫—Ç–∏–∫–∞", room: "–£–õ–ö-2 ¬∑ –∞—É–¥. 330", teacher: "–¥–æ—Ü–µ–Ω—Ç –§–µ–æ–∫—Ç–∏—Å—Ç–æ–≤–∞ –õ–∏–¥–∏—è –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–Ω–∞/–†–∑–∞–µ–≤–∞ –¢–∞—Ç—å—è–Ω–∞ –í–∞—Å–∏–ª—å–µ–≤–Ω–∞", hw: "" },
        { time: "13:30‚Äì15:00", subject: "–í–≤–µ–¥–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å", type: "–ª–µ–∫—Ü–∏—è/–ø—Ä–∞–∫—Ç–∏–∫–∞", room: "–£–õ–ö-2 ¬∑ –∞—É–¥. 417", teacher: "–¥–æ—Ü–µ–Ω—Ç –í–∞–ª–∏–µ–≤ –†—É—Å—Ç–∞–º –ê—Å–≥–∞—Ç–æ–≤–∏—á", hw: "" }
      ],
      3: [
        { time: "08:00‚Äì09:30", subject: "–ò—Å—Ç–æ—Ä–∏—è –†–æ—Å—Å–∏–∏", type: "–ª–µ–∫—Ü–∏—è (10.09, 24.09, 08.10)", room: "–£–õ–ö-1, –∞—É–¥. 420", teacher: "–¥–æ—Ü–µ–Ω—Ç –ë–µ—Å—Å–æ–Ω–æ–≤–∞ –¢–∞—Ç—å—è–Ω–∞ –í–∏–∫—Ç–æ—Ä–æ–≤–Ω–∞", hw: "" },
        { time: "09:40‚Äì11:10", subject: "–ò—Å—Ç–æ—Ä–∏—è –†–æ—Å—Å–∏–∏", type: "–ª–µ–∫—Ü–∏—è", room: "–£–õ–ö-1, –∞—É–¥. 414", teacher: "–¥–æ—Ü–µ–Ω—Ç –ë–µ—Å—Å–æ–Ω–æ–≤–∞ –¢–∞—Ç—å—è–Ω–∞ –í–∏–∫—Ç–æ—Ä–æ–≤–Ω–∞", hw: "" },
        { time: "11:50‚Äì13:20", subject: "–ò–Ω–∂–µ–Ω–µ—Ä–Ω–∞—è –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è –≥—Ä–∞—Ñ–∏–∫–∞", type: "–ª–µ–∫—Ü–∏—è", room: "–£–õ–ö-2, –∞—É–¥. 341", teacher: "–¥–æ—Ü–µ–Ω—Ç –§–µ–æ–∫—Ç–∏—Å—Ç–æ–≤–∞ –õ–∏–¥–∏—è –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–Ω–∞", hw: "" }
      ],
      4: [
        { time: "08:00‚Äì09:30", subject: "–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–æ–º–µ—Ç—Ä–∏—è", type: "–ø—Ä–∞–∫—Ç–∏–∫–∞", room: "–£–õ–ö-2, –∞—É–¥. 302", teacher: "–¥–æ—Ü–µ–Ω—Ç –ö–æ—Å—Ç–∏–Ω –ê–Ω–¥—Ä–µ–π –í–∏–∫—Ç–æ—Ä–æ–≤–∏—á", hw: "" },
        { time: "09:40‚Äì11:10", subject: "–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–æ–º–µ—Ç—Ä–∏—è", type: "–ª–µ–∫—Ü–∏—è", room: "–£–õ–ö-2, –∞—É–¥. 302", teacher: "–¥–æ—Ü–µ–Ω—Ç –ö–æ—Å—Ç–∏–Ω –ê–Ω–¥—Ä–µ–π –í–∏–∫—Ç–æ—Ä–æ–≤–∏—á", hw: "" },
        { time: "11:50‚Äì13:20", subject: "–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–æ–º–µ—Ç—Ä–∏—è", type: "–ø—Ä–∞–∫—Ç–∏–∫–∞", room: "–£–õ–ö-2, –∞—É–¥. 432", teacher: "–¥–æ—Ü–µ–Ω—Ç –ö–æ—Å—Ç–∏–Ω –ê–Ω–¥—Ä–µ–π –í–∏–∫—Ç–æ—Ä–æ–≤–∏—á", hw: "" }
      ],
      5: [
        { time: "08:00‚Äì09:30", subject: "–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑", type: "–ø—Ä–∞–∫—Ç–∏–∫–∞", room: "–£–õ–ö-2, –∞—É–¥. 432", teacher: "–¥–æ—Ü–µ–Ω—Ç –ì—É–±–æ—á–∫–∏–Ω–∞ –ù–∞—Ç–∞–ª—å—è –ò–≤–∞–Ω–æ–≤–Ω–∞", hw: "" },
        { time: "09:40‚Äì11:10", subject: "–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑", type: "–ª–µ–∫—Ü–∏—è", room: "–£–õ–ö-2, –∞—É–¥. 302", teacher: "–¥–æ—Ü–µ–Ω—Ç –ì—É–±–æ—á–∫–∏–Ω–∞ –ù–∞—Ç–∞–ª—å—è –ò–≤–∞–Ω–æ–≤–Ω–∞", hw: "" },
        { time: "11:50‚Äì13:20", subject: "–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞", type: "–ª–µ–∫—Ü–∏—è", room: "–£–õ–ö-5, –∞—É–¥. 305", teacher: "—Å—Ç.–ø—Ä–µ–ø. –ë—É–ª–∞—Ç–æ–≤–∞ –°–≤–µ—Ç–ª–∞–Ω–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞", hw: "" },
        { time: "13:30‚Äì15:00", subject: "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ", type: "–ª–µ–∫—Ü–∏—è", room: "–£–õ–ö-5, –∞—É–¥. 308", teacher: "—Å—Ç.–ø—Ä–µ–ø. –ë—É–ª–∞—Ç–æ–≤–∞ –°–≤–µ—Ç–ª–∞–Ω–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞", hw: "" }
      ],
      6: [
        { time: "08:00‚Äì09:30", subject: "–ò–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–π —è–∑—ã–∫", type: "—ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ (–ø—Ä–∞–∫—Ç–∏–∫–∞)", room: "", teacher: "", hw: "" }
      ]
    }
  };
  const homeworkData = {
    "2025-10-03": [
      "–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞: –í—ã–ø–æ–ª–Ω–∏—Ç—å –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –ø–æ Excel –∑–∞ –ø–µ—Ä–≤—ã–π —Å–µ–º–µ—Å—Ç—Ä"
    ]
  };
  
  // ===== –î–ê–ù–ù–´–ï –õ–ï–ö–¶–ò–ô =====
  const lecturesData = {
    "–•–∏–º–∏—è": [
      {
        title: "–õ–µ–∫—Ü–∏—è 2: test",
        content: [
          { type: 'text', content: "1" },
          { type: 'image', url: "https://example.com/chem2-2.jpg" },
        ]
      }
    ]
  };
  
  // ===== –†–ï–ù–î–ï–† –ö–û–ú–ü–ê–ö–¢–ù–û–ì–û –†–ê–°–ü–ò–°–ê–ù–ò–Ø =====
  function renderCompactSchedule(container, date) {
    const day = date.getDay();
    const weekType = getWeekType(date);
    const lessons = scheduleData[weekType]?.[day] || [];
    container.innerHTML = '';
    if (lessons.length === 0) {
      container.innerHTML = '<div class="lesson-card" style="text-align:center;color:#888;">–í—ã—Ö–æ–¥–Ω–æ–π üå∏</div>';
      return;
    }
    lessons.forEach(lesson => {
      const card = document.createElement('div');
      card.className = 'lesson-card';
      let cardHTML = `
        <div class="lesson-time">
          <i class="far fa-clock"></i> ${lesson.time}
          <span class="lesson-subject" data-type="${lesson.type}">${lesson.subject}</span>
        </div>
        <div class="lesson-meta">${lesson.type} ¬∑ ${lesson.room}</div>
      `;
      if (lesson.hw) {
        const hwKey = `${formatDate(date)}|${lesson.hw}`;
        const isCompleted = getCompletedTasks()[hwKey] === true;
        cardHTML += `
          <button class="hw-toggle" data-hw-key="${hwKey}">
            –î–ó –∏ —Ä–µ—à–µ–Ω–∏–µ <i class="fas fa-chevron-down"></i>
          </button>
          <div class="hw-content" style="display:none;">
            ${lesson.hw}
            <div class="hw-checkbox">
              <input type="checkbox" id="cb-${hwKey}" ${isCompleted ? 'checked' : ''}>
              <label for="cb-${hwKey}">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</label>
            </div>
          </div>
        `;
      }
      card.innerHTML = cardHTML;
      container.appendChild(card);
      if (lesson.hw) {
        const toggleBtn = card.querySelector('.hw-toggle');
        const hwContent = card.querySelector('.hw-content');
        const checkbox = card.querySelector('input[type="checkbox"]');
        toggleBtn.addEventListener('click', () => {
          if (hwContent.style.display === 'block') {
            hwContent.style.display = 'none';
            toggleBtn.innerHTML = '–î–ó –∏ —Ä–µ—à–µ–Ω–∏–µ <i class="fas fa-chevron-down"></i>';
          } else {
            hwContent.style.display = 'block';
            toggleBtn.innerHTML = '–°–∫—Ä—ã—Ç—å <i class="fas fa-chevron-up"></i>';
          }
        });
        checkbox?.addEventListener('change', (e) => {
          setCompletedTask(hwKey, e.target.checked);
        });
      }
    });
  }
  
  // ===== –ü–û–õ–ù–û–ï –†–ê–°–ü–ò–°–ê–ù–ò–ï =====
  function renderFullSchedule(weekType = 'upper') {
    const container = document.getElementById('full-schedule');
    container.innerHTML = '';
    const dayNames = ['–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ', '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞', '–ß–µ—Ç–≤–µ—Ä–≥', '–ü—è—Ç–Ω–∏—Ü–∞', '–°—É–±–±–æ—Ç–∞'];
    const lessons = scheduleData[weekType] || {};
    for (let day = 1; day <= 6; day++) {
      const dayLessons = lessons[day] || [];
      if (dayLessons.length === 0) continue;
      const dayDiv = document.createElement('div');
      dayDiv.className = 'schedule-item';
      let html = `<h3>${dayNames[day]}</h3>`;
      dayLessons.forEach(lesson => {
        html += `<p><strong>${lesson.subject}</strong> (${lesson.type})<br>
                 <small>${lesson.time} ¬∑ ${lesson.room} ¬∑ ${lesson.teacher}</small></p>`;
      });
      dayDiv.innerHTML = html;
      container.appendChild(dayDiv);
    }
    document.getElementById('week-upper').classList.toggle('active', weekType === 'upper');
    document.getElementById('week-lower').classList.toggle('active', weekType === 'lower');
  }
  
  // ===== –î–û–ú–ê–®–ù–ï–ï –ó–ê–î–ê–ù–ò–ï =====
  function renderHomework() {
    const container = document.getElementById('homework-list');
    container.innerHTML = '';
    const sortedDates = Object.keys(homeworkData).sort((a, b) => new Date(b) - new Date(a));
    if (sortedDates.length === 0) {
      container.innerHTML = '<p style="text-align:center;color:#888;">–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ.</p>';
      return;
    }
    sortedDates.forEach(dateStr => {
      const date = new Date(dateStr);
      const dayDiv = document.createElement('div');
      dayDiv.className = 'homework-date';
      let hwHtml = `<h3>${formatDate(date)}</h3>`;
      homeworkData[dateStr].forEach(hw => {
        const hwKey = `${dateStr}|${hw}`;
        const isCompleted = getCompletedTasks()[hwKey] === true;
        hwHtml += `
          <div class="homework-item">
            ${hw}
            <button class="solution-toggle" data-hw-key="${hwKey}">
              –†–µ—à–µ–Ω–∏–µ <i class="fas fa-chevron-down"></i>
            </button>
            <div class="solution-content" style="display:none;">
              <div class="hw-checkbox">
                <input type="checkbox" id="sol-${hwKey}" ${isCompleted ? 'checked' : ''}>
                <label for="sol-${hwKey}">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</label>
              </div>
              <div style="margin-top:0.7rem; padding-top:0.7rem; border-top:1px solid var(--shadow);">
                <strong>–ü—Ä–∏–º–µ—Ä —Ä–µ—à–µ–Ω–∏—è:</strong><br>
                1. [–ü—Ä–∏–º–µ—Ä —Ä–µ—à–µ–Ω–∏—è ‚Äî –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å]
              </div>
            </div>
          </div>
        `;
      });
      dayDiv.innerHTML = hwHtml;
      container.appendChild(dayDiv);
      dayDiv.querySelectorAll('.solution-toggle').forEach(btn => {
        const hwKey = btn.dataset.hwKey;
        const content = btn.nextElementSibling;
        const checkbox = content.querySelector('input[type="checkbox"]');
        btn.addEventListener('click', () => {
          if (content.style.display === 'block') {
            content.style.display = 'none';
            btn.innerHTML = '–†–µ—à–µ–Ω–∏–µ <i class="fas fa-chevron-down"></i>';
          } else {
            content.style.display = 'block';
            btn.innerHTML = '–°–∫—Ä—ã—Ç—å <i class="fas fa-chevron-up"></i>';
          }
        });
        checkbox?.addEventListener('change', (e) => {
          setCompletedTask(hwKey, e.target.checked);
        });
      });
    });
  }
  
  // ===== –õ–ï–ö–¶–ò–ò =====
  function renderLectures() {
    const container = document.getElementById('lectures-list');
    if (!container) return;
    container.innerHTML = '';
    if (!lecturesData || typeof lecturesData !== 'object') {
      console.error('–î–∞–Ω–Ω—ã–µ –ª–µ–∫—Ü–∏–π –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∏–ª–∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –æ–±—ä–µ–∫—Ç–æ–º');
      return;
    }
    Object.keys(lecturesData).forEach(subject => {
      const lectures = lecturesData[subject] || [];
      if (!Array.isArray(lectures)) return;
      const card = document.createElement('div');
      card.className = 'lecture-subject-card';
      const subjectToggleBtn = document.createElement('button');
      subjectToggleBtn.className = 'lecture-toggle';
      subjectToggleBtn.textContent = subject;
      subjectToggleBtn.dataset.subject = subject;
      const lectureList = document.createElement('div');
      lectureList.className = 'lecture-list';
      lectureList.id = `lectures-${subject.replace(/\s+/g, '-')}`;
      lectures.forEach(lecture => {
        if (!lecture || typeof lecture !== 'object') return;
        const item = document.createElement('div');
        item.className = 'lecture-item';
        const title = document.createElement('span');
        title.className = 'lecture-title';
        title.textContent = lecture.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';
        item.appendChild(title);
        const detailsBtn = document.createElement('button');
        detailsBtn.className = 'lecture-details-toggle';
        detailsBtn.textContent = '–ü–æ–¥—Ä–æ–±–Ω–µ–µ';
        detailsBtn.addEventListener('click', () => {
          const currentLecture = item;
          const subjectContainer = item.closest('.lecture-subject-card');
          const allLectures = subjectContainer.querySelectorAll('.lecture-item');
          allLectures.forEach(lectureEl => {
            if (lectureEl !== currentLecture) {
              const details = lectureEl.querySelector('.lecture-details');
              const btn = lectureEl.querySelector('.lecture-details-toggle');
              if (details) details.style.display = 'none';
              if (btn) btn.textContent = '–ü–æ–¥—Ä–æ–±–Ω–µ–µ';
            }
          });
          const details = item.querySelector('.lecture-details');
          if (details) {
            if (details.style.display === 'none' || details.style.display === '') {
              details.style.display = 'block';
              detailsBtn.textContent = '–°–∫—Ä—ã—Ç—å';
            } else {
              details.style.display = 'none';
              detailsBtn.textContent = '–ü–æ–¥—Ä–æ–±–Ω–µ–µ';
            }
          }
        });
        item.appendChild(detailsBtn);
        const details = document.createElement('div');
        details.className = 'lecture-details';
        details.style.display = 'none';
        if (lecture.content && Array.isArray(lecture.content)) {
          lecture.content.forEach((element, index) => {
            if (element.type === 'image' && element.url) {
              const img = document.createElement('img');
              img.src = element.url.trim();
              img.alt = `${lecture.title} - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ${index + 1}`;
              img.loading = "lazy";
              img.style.maxWidth = "100%";
              img.style.borderRadius = "10px";
              img.style.marginTop = "10px";
              details.appendChild(img);
            } else if (element.type === 'text' && element.content) {
              const p = document.createElement('p');
              p.className = `lecture-content-${index}`;
              p.innerHTML = element.content;
              p.style.marginTop = "10px";
              p.style.fontWeight = "550";
              p.style.fontSize = "1.02rem";
              details.appendChild(p);
            }
          });
        }
        item.appendChild(details);
        lectureList.appendChild(item);
      });
      subjectToggleBtn.addEventListener('click', () => {
        const isActive = lectureList.style.display === 'block';
        lectureList.style.display = isActive ? 'none' : 'block';
        subjectToggleBtn.classList.toggle('active', !isActive);
      });
      card.appendChild(subjectToggleBtn);
      card.appendChild(lectureList);
      container.appendChild(card);
    });
  }
  
  // ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø =====
  function init() {
    const now = getMoscowDate();
    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
    const tomorrow = addDays(today, 1);
    document.getElementById('today-header').textContent = `–°–µ–≥–æ–¥–Ω—è ‚Äî ${formatDate(today)}`;
    document.getElementById('tomorrow-header').textContent = `–ó–∞–≤—Ç—Ä–∞ ‚Äî ${formatDate(tomorrow)}`;
    renderCompactSchedule(document.getElementById('today-schedule'), today);
    renderCompactSchedule(document.getElementById('tomorrow-schedule'), tomorrow);
    renderFullSchedule();
    renderHomework();
    renderLectures();
    if (!isPasswordEntered()) {
      showPasswordForm();
    }
  }
  
  function isPasswordEntered() {
    return localStorage.getItem('lecturesPassword') === 'true';
  }
  
  function showPasswordForm() {
    const lecturesSection = document.getElementById('lectures');
    lecturesSection.innerHTML = `
      <div style="text-align: center; margin: 2.5rem 0; padding: 2rem; background: var(--card-bg); border-radius: var(--border-radius); box-shadow: 0 10px 30px var(--shadow);">
        <h2><i class="fas fa-lock"></i> –ó–∞—â–∏—â–µ–Ω–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞</h2>
        <p>–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ª–µ–∫—Ü–∏—è–º –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:</p>
        <div style="margin: 2rem 0;">
          <input type="password" id="lecturesPassword" placeholder="–ü–∞—Ä–æ–ª—å" style="padding: 1rem; border-radius: 12px; border: 1px solid var(--accent); font-size: 1.15rem; width: 200px; text-align: center;">
          <button id="lecturesSubmit" style="margin-left: 1rem; padding: 0.9rem 2rem; border-radius: 12px; background: var(--primary); color: white; border: none; font-weight: 700; cursor: pointer;">
            –í–æ–π—Ç–∏
          </button>
        </div>
      </div>
    `;
    document.getElementById('lecturesSubmit').addEventListener('click', function() {
      const password = document.getElementById('lecturesPassword').value;
      if (password === '8888') {
        localStorage.setItem('lecturesPassword', 'true');
        location.reload();
      } else {
        alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
        document.getElementById('lecturesPassword').value = '';
        document.getElementById('lecturesPassword').focus();
      }
    });
    document.getElementById('lecturesPassword').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        document.getElementById('lecturesSubmit').click();
      }
    });
  }
  
  // ===== –ù–ê–í–ò–ì–ê–¶–ò–Ø =====
  document.querySelectorAll('.nav-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      btn.classList.add('active');
      const tab = btn.dataset.tab;
      document.getElementById(tab).classList.add('active');
    });
  });
  
  // ===== –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –ù–ï–î–ï–õ–¨ =====
  document.getElementById('week-upper').addEventListener('click', () => {
    renderFullSchedule('upper');
  });
  document.getElementById('week-lower').addEventListener('click', () => {
    renderFullSchedule('lower');
  });
  
  window.addEventListener('load', init);
</script>
</body>
</html>
