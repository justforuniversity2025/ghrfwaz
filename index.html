<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!-- ЗАПРЕТ КЭШИРОВАНИЯ -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta name="robots" content="noindex">
  <title> Для одногруппников</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    :root {
      --primary: #ff9ec5;
      --secondary: #a29bff;
      --accent: #6eceda;
      --bg: #fdf6f0;
      --card-bg: #ffffff;
      --text: #222;
      --shadow: rgba(0,0,0,0.1);
      --border-radius: 14px;
      --transition: all 0.25s ease;
    }

    .dark-theme {
      --bg: #121212;
      --card-bg: #1e1e1e;
      --text: #f5f5f5;
      --shadow: rgba(0,0,0,0.4);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', system-ui, sans-serif;
    }

    body {
      background: var(--bg);
      color: var(--text);
      line-height: 1.5;
      padding: 0;
      margin: 0;
      transition: var(--transition);
    }

    header {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      padding: 1rem 1.5rem;
      box-shadow: 0 3px 15px var(--shadow);
      position: sticky;
      top: 0;
      z-index: 100;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.9rem;
      flex-wrap: wrap;
    }

    .theme-toggle {
      background: rgba(255,255,255,0.25);
      backdrop-filter: blur(8px);
      border: none;
      color: white;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      font-size: 14px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }

    .theme-toggle:hover {
      background: rgba(255,255,255,0.4);
      transform: rotate(15deg);
    }

    nav {
      display: flex;
      gap: 0.6rem;
    }

    .nav-btn {
      background: rgba(255,255,255,0.25);
      backdrop-filter: blur(8px);
      border: none;
      color: white;
      padding: 0.6rem 1.1rem;
      margin: 0;
      border-radius: 50px;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: var(--transition);
      white-space: nowrap;
    }

    .nav-btn:hover, .nav-btn.active {
      background: white;
      color: var(--primary);
      transform: translateY(-1px);
    }

    main {
      max-width: 1200px;
      margin: 1.8rem auto;
      padding: 0 1.2rem;
    }

    .section {
      display: none;
      animation: fadeIn 0.5s ease;
    }

    .section.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h2 {
      margin: 1.6rem 0 1rem;
      color: var(--text);
      font-size: 1.55rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    p, li {
      font-size: 1rem;
      font-weight: 500;
      color: var(--text);
    }

    .today-tomorrow {
      display: flex;
      gap: 1.3rem;
      flex-wrap: wrap;
    }

    .day-column {
      flex: 1;
      min-width: 290px;
    }

    .day-header {
      background: linear-gradient(to right, var(--primary), var(--accent));
      color: white;
      padding: 0.7rem;
      border-radius: var(--border-radius) var(--border-radius) 0 0;
      font-weight: 700;
      text-align: center;
      font-size: 1.15rem;
    }

    .lesson-card {
      background: var(--card-bg);
      border-radius: 0 0 var(--border-radius) var(--border-radius);
      padding: 0.85rem;
      margin-bottom: 0.85rem;
      box-shadow: 0 2px 7px var(--shadow);
      transition: var(--transition);
      color: var(--text);
    }

    .lesson-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 10px var(--shadow);
    }

    .lesson-time {
      font-size: 0.92rem;
      color: var(--accent);
      margin-bottom: 0.25rem;
      display: flex;
      align-items: center;
      gap: 5px;
      font-weight: 600;
    }

    .lesson-title {
      font-weight: 700;
      color: var(--text);
      margin-bottom: 0.25rem;
      font-size: 1.1rem;
    }

    .lesson-meta {
      font-size: 0.92rem;
      color: #666;
      margin-bottom: 0.45rem;
      font-weight: 600; /* ЖИРНЕЕ! */
    }

    .dark-theme .lesson-meta {
      color: #ccc;
    }

    .hw-toggle {
      background: var(--accent);
      color: white;
      border: none;
      padding: 0.32rem 0.7rem;
      border-radius: 18px;
      font-size: 0.85rem;
      cursor: pointer;
      margin-top: 0.4rem;
      transition: var(--transition);
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .hw-toggle:hover {
      opacity: 0.92;
    }

    .hw-content {
      margin-top: 0.7rem;
      padding: 0.7rem;
      background: var(--bg);
      border-radius: 8px;
      display: none;
      font-size: 0.98rem;
      border-left: 2.5px solid var(--accent);
      color: var(--text);
      font-weight: 500;
    }

    .hw-checkbox {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 0.6rem;
    }

    .hw-checkbox input {
      width: 18px;
      height: 18px;
      cursor: pointer;
    }

    .hw-checkbox label {
      font-size: 0.95rem;
      font-weight: 500;
      cursor: pointer;
    }

    .full-schedule-list, .homework-list, .lectures-list {
      display: flex;
      flex-direction: column;
      gap: 1.1rem;
    }

    .schedule-item, .homework-date, .lecture-subject-card {
      background: var(--card-bg);
      padding: 1.1rem;
      border-radius: var(--border-radius);
      box-shadow: 0 3px 10px var(--shadow);
      color: var(--text);
    }

    .schedule-week-header {
      background: linear-gradient(to right, var(--secondary), var(--primary));
      color: white;
      padding: 0.65rem;
      border-radius: var(--border-radius);
      margin-bottom: 0.9rem;
      text-align: center;
      font-weight: 700;
      font-size: 1.15rem;
    }

    .homework-date h3 {
      margin-bottom: 0.7rem;
      color: var(--primary);
      font-size: 1.35rem;
      font-weight: 700;
    }

    .homework-item {
      margin-top: 0.65rem;
      padding-left: 1rem;
      border-left: 2px solid var(--accent);
      color: var(--text);
      font-size: 1rem;
      font-weight: 500;
    }

    .solution-toggle {
      background: var(--secondary);
      color: white;
      border: none;
      padding: 0.3rem 0.65rem;
      border-radius: 16px;
      font-size: 0.84rem;
      cursor: pointer;
      margin-top: 0.45rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .solution-content {
      margin-top: 0.65rem;
      padding: 0.65rem;
      background: var(--bg);
      border-radius: 8px;
      display: none;
      font-size: 0.98rem;
    }

    footer {
      text-align: center;
      padding: 1.8rem;
      margin-top: 2.5rem;
      color: #999;
      font-size: 0.95rem;
      border-top: 1px solid var(--card-bg);
      font-weight: 500;
    }

    @media (max-width: 768px) {
      .today-tomorrow {
        flex-direction: column;
      }
      header {
        padding: 1rem;
        gap: 0.7rem;
      }
      .nav-btn {
        padding: 0.55rem 1rem;
        font-size: 0.95rem;
      }
    }
/* Кнопки переключения недель — единый стиль для обеих тем */
.week-toggle-btn {
  background: rgba(255, 255, 255, 0.25);
  backdrop-filter: blur(10px);
  border: none;
  padding: 0.75rem 1.6rem;
  margin: 0 0.6rem;
  border-radius: 50px;
  font-weight: 600;
  font-size: 1.15rem;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  white-space: nowrap;
}

/* Цвет текста: белый в тёмной теме, тёмно-серый в светлой */
.dark-theme .week-toggle-btn {
  color: white;
}

body:not(.dark-theme) .week-toggle-btn {
  color: #222;
}

/* HOVER и ACTIVE — одинаковые в обеих темах */
.week-toggle-btn:hover,
.week-toggle-btn.active {
  background: white;
  color: var(--primary);
  transform: translateY(-2px);
  box-shadow: 0 4px 14px rgba(0,0,0,0.18);
}

/* При hover — лёгкое увеличение */
.week-toggle-btn:hover:not(.active) {
  transform: translateY(-2px) scale(1.02);
}

/* Кнопки предметов в разделе "Лекции" — в стиле сайта */
/* Кнопки предметов в разделе "Лекции" — в стиле сайта */
/* Кнопки предметов в разделе "Лекции" — в стиле сайта */
.lecture-toggle {
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  color: white;
  border: none;
  padding: 0.85rem 1.4rem;
  border-radius: 16px;
  font-size: 1.15rem;
  font-weight: 600;
  cursor: pointer;
  width: 100%;
  text-align: left;
  margin-bottom: 1rem;
  transition: all 0.3s ease;
  box-shadow: 0 3px 10px rgba(0,0,0,0.12);
  position: relative;
  overflow: hidden;
}

.lecture-toggle:hover {
  transform: translateY(-3px) scale(1.01);
  box-shadow: 0 5px 15px rgba(0,0,0,0.18);
}

.lecture-toggle::after {
  content: "▼";
  position: absolute;
  right: 1.2rem;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.9rem;
  opacity: 0.9;
  transition: transform 0.3s ease;
}

.lecture-toggle.active::after {
  content: "▲";
}

.lecture-list {
  display: none;
  margin-top: 0.7rem;
  padding-left: 1.2rem;
  border-left: 2px solid var(--secondary);
}

.lecture-item {
  margin: 0.5rem 0;
  font-size: 1rem;
  font-weight: 500;
}

.lecture-details {
  margin-top: 0.7rem;
  padding: 0.7rem;
  background: var(--bg);
  border-radius: 8px;
  display: none;
  font-size: 0.98rem;
  border-left: 2.5px solid var(--accent);
  color: var(--text);
  font-weight: 500;
  transition: all 0.3s ease;
}

.lecture-details img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
  margin-top: 0.5rem;
}

/* Анимация появления текста */
.lecture-content {
  animation: fadeIn 0.5s ease;
  opacity: 0;
  transform: translateY(5px);
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(5px); }
  to { opacity: 1; transform: translateY(0); }
}
.lecture-details-toggle {
  background: var(--accent);
  color: white;
  border: none;
  padding: 0.3rem 0.7rem;
  border-radius: 18px;
  font-size: 0.85rem;
  cursor: pointer;
  margin-top: 0.4rem;
  margin-left: 1.0rem;
  transition: var(--transition);
  font-weight: 600;
  display: inline-flex;
  align-items: center;
  gap: 5px;
}

.lecture-details-toggle:hover {
  opacity: 0.92;
}
/* Добавьте это в ваш CSS */
.lecture-details .highlight {
  font-weight: 700;
  margin: 0 3px;
}

/* Для светлой темы: черное выделение */
body:not(.dark-theme) .lecture-details .highlight {
  color: #000;
}

/* Для темной темы: оставляем как есть с использованием --primary */
body.dark-theme .lecture-details .highlight {
  color: var(--primary);
}
/* Стиль для формы ввода пароля */
#lectures .section.active {
  padding: 2rem 1.5rem;
}

#lectures form {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1rem;
}

#lectures form input {
  border: 1px solid var(--accent);
  padding: 0.6rem;
  border-radius: 8px;
  font-size: 1rem;
}

#lectures form button {
  font-size: 1.05rem;
  transition: all 0.2s;
}

#lectures form button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 10px var(--shadow);
}
  </style>
</head>
<body>

<header>
  <nav>
    <button class="nav-btn active" data-tab="home">Главная</button>
    <button class="nav-btn" data-tab="schedule">Расписание</button>
    <button class="nav-btn" data-tab="homework">ДЗ</button>
    <button class="nav-btn" data-tab="lectures">Лекции</button>
  </nav>
  <button class="theme-toggle" id="themeToggle" aria-label="Переключить тему">
    <i class="fas fa-moon"></i>
  </button>
</header>

<main>
  <!-- Главная -->
  <section id="home" class="section active">
    <h1>Делается</h1>
    <div class="today-tomorrow">
      <div class="day-column">
        <div class="day-header" id="today-header">Сегодня</div>
        <div id="today-schedule"></div>
      </div>
      <div class="day-column">
        <div class="day-header" id="tomorrow-header">Завтра</div>
        <div id="tomorrow-schedule"></div>
      </div>
    </div>

    <h2><i class="fas fa-graduation-cap"></i> Учебный план</h2>
    <p>1</p>

    <h2><i class="fas fa-info-circle"></i> Информация</h2>
    <p>1</p>

    <h2><i class="fas fa-tasks"></i> Критерии оценивания</h2>
    <p>Итоговая оценка складывается из:</p>
    <ul style="margin-left: 1.8rem; margin-top: 0.6rem;">
      <li>50% — посещение и активность на парах</li>
      <li>50% — результат зачёта</li>
    </ul>
    <p style="margin-top: 1rem;"><strong>Шкала оценок:</strong></p>
    <ul style="margin-left: 1.8rem;">
      <li>ниже 56 баллов — не сдал ❌</li>
      <li>56–70 — Удовлетворительно ✅</li>
      <li>71–85 — Хорошо ✅</li>
      <li>86–100 — Отлично ✅</li>
    </ul>
  </section>

  <!-- Расписание -->
  <section id="schedule" class="section">
     <div style="display: flex; gap: 0.8rem; margin: 1.4rem 0; justify-content: center; flex-wrap: wrap;">
    <button class="week-toggle-btn active" id="week-upper">Верхняя неделя</button>
    <button class="week-toggle-btn" id="week-lower">Нижняя неделя</button>
  </div>
    <div class="full-schedule-list" id="full-schedule"></div>
  </section>

  <!-- Домашнее задание -->
  <section id="homework" class="section">
    <h2><i class="fas fa-pen"></i> Домашнее задание</h2>
    <div class="homework-list" id="homework-list"></div>
  </section>

  <!-- Лекции -->
  <section id="lectures" class="section">
    <h2><i class="fas fa-book-open"></i> Лекции по предметам</h2>
    <div class="lectures-list" id="lectures-list"></div>
  </section>
</main>

<footer>
  © 2025 Сделано с ❤ для одногруппников
</footer>

<script>
  // ===== ТЕМА =====
  const themeToggle = document.getElementById('themeToggle');
  const body = document.body;
  const savedTheme = localStorage.getItem('theme');
  const systemPrefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
  let currentTheme = savedTheme || (systemPrefersDark ? 'dark' : 'light');

  function applyTheme(theme) {
    if (theme === 'dark') {
      body.classList.add('dark-theme');
      themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
      localStorage.setItem('theme', 'dark');
    } else {
      body.classList.remove('dark-theme');
      themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
      localStorage.setItem('theme', 'light');
    }
  }
  applyTheme(currentTheme);
  themeToggle.addEventListener('click', () => {
    currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
    applyTheme(currentTheme);
  });

  // ===== ВСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ =====
  function getMoscowDate() {
    const now = new Date();
    const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
    return new Date(utc + (3 * 3600000));
  }

  function formatDate(date) {
    const days = ['воскресенье', 'понедельник', 'вторник', 'среда', 'четверг', 'пятница', 'суббота'];
    const months = ['января', 'февраля', 'марта', 'апреля', 'мая', 'июня', 'июля', 'августа', 'сентября', 'октября', 'ноября', 'декабря'];
    return `${days[date.getDay()]}, ${date.getDate()} ${months[date.getMonth()]}`;
  }

  function addDays(date, days) {
    const result = new Date(date);
    result.setDate(result.getDate() + days);
    return result;
  }

  function getWeekType(date) {
    const semesterStart = new Date(2024, 8, 2);
    const msInWeek = 7 * 24 * 60 * 60 * 1000;
    const diffTime = date - semesterStart;
    const diffWeeks = Math.floor(diffTime / msInWeek);
    return diffWeeks % 2 === 0 ? 'upper' : 'lower';
  }

  // ===== ХРАНЕНИЕ ВЫПОЛНЕННЫХ ДЗ =====
  function getCompletedTasks() {
    const saved = localStorage.getItem('completedHomework');
    return saved ? JSON.parse(saved) : {};
  }

  function setCompletedTask(key, completed) {
    const tasks = getCompletedTasks();
    tasks[key] = completed;
    localStorage.setItem('completedHomework', JSON.stringify(tasks));
  }

  // ===== ДАННЫЕ РАСПИСАНИЯ =====
  const scheduleData = {
    upper: {
      1: [
        { time: "08:00–09:30", subject: "Физкультура", type: "лекция", room: "УЛК-1, ауд. 420", teacher: "профессор Москвин Николай Геннадьевна", hw: "" },
        { time: "09:40–11:10", subject: "Химия", type: "лекция", room: "УЛК-1, ауд. 420", teacher: "доцент Сиппель Ирина Яковлевна", hw: "" },
        { time: "11:50–13:20", subject: "Химия", type: "лаб.", room: "УЛК-1, ауд. 145/143", teacher: "доцент Сиппель Ирина Яковлевна / Шарафутдинов Р.Н.", hw: "" },
        { time: "13:30–15:00", subject: "Химия", type: "лаб.", room: "УЛК-1, ауд. 145/143", teacher: "доцент Сиппель Ирина Яковлевна / Шарафутдинов Р.Н.", hw: "" }
      ],
      2: [
        { time: "08:00–09:30", subject: "Основы российской государственности", type: "практика", room: "УЛК-1, ауд. 454", teacher: "доцент Яковлева Марина Геннадьевна", hw: "" },
        { time: "09:40–11:10", subject: "Основы российской государственности", type: "практика", room: "УЛК-1, ауд. 454", teacher: "доцент Яковлева Марина Геннадьевна", hw: "" },
        { time: "11:50–13:20", subject: "Информатика", type: "лаб.", room: "УЛК-2, ауд. 401/418", teacher: "ст.преп. Булатова Светлана Владимировна / Шигапова Л.Ф.", hw: "" }
      ],
      3: [
        { time: "08:00–09:30", subject: "История России", type: "практика", room: "УЛК-1, ауд. 420", teacher: "доцент Бессонова Татьяна Викторовна", hw: "" },
        { time: "09:40–11:10", subject: "История России", type: "лекция", room: "УЛК-1, ауд. 414", teacher: "доцент Бессонова Татьяна Викторовна", hw: "" },
        { time: "11:50–13:20", subject: "Иностранный язык (2 подгр.)", type: "практика", room: "УЛК-1, ауд. 326", teacher: "доцент Славина Лилия Р.", hw: "" }
      ],
      5: [
        { time: "08:00–09:30", subject: "Математический анализ", type: "практика", room: "УЛК-2, ауд. 432", teacher: "доцент Губочкина Наталья Ивановна", hw: "" },
        { time: "09:40–11:10", subject: "Математический анализ", type: "лекция", room: "УЛК-2, ауд. 302", teacher: "доцент Губочкина Наталья Ивановна", hw: "" },
        { time: "11:50–13:20", subject: "Физическая культура и спорт", type: "практика", room: "спорткомплекс, ауд. 24", teacher: "преп. Камалетдинов Марат Шавкитович", hw: "" },
        { time: "13:30–15:00", subject: "Иностранный язык (1 подгр.)", type: "практика", room: "УЛК-4, ауд. 208", teacher: "ст.преп. Мустафина Л.Р.", 
          hw: "Unit 1, страница 19 — Английский ДЗ (Рабочая тетрадь)" }
      ]
    },
    lower: {
      1: [
        { time: "09:40–11:10", subject: "Химия", type: "лекция", room: "УЛК-1, ауд. 420", teacher: "доцент Сиппель Ирина Яковлевна", hw: "" },
        { time: "11:50–13:20", subject: "Основы российской государственности", type: "лекция", room: "УЛК-1, ауд. 420", teacher: "доцент Яковлева Марина Геннадьевна", hw: "" }
      ],
      2: [
        { time: "08:00–09:30", subject: "Программирование", type: "лаб.", room: "УЛК-2, ауд. 405/406", teacher: "ст.преп. Булатова Светлана Владимировна / Шигапова Л.Ф.", hw: "" },
        { time: "09:40–11:10", subject: "Информатика", type: "лаб.", room: "УЛК-2, ауд. 401/418", teacher: "ст.преп. Булатова Светлана Владимировна / Шигапова Л.Ф.", 
          hw: "Выполнить лабораторные работы по Excel за первый семестр" }
      ],
      3: [
        { time: "08:00–09:30", subject: "История России", type: "лекция (10.09, 24.09, 08.10)", room: "УЛК-1, ауд. 420", teacher: "доцент Бессонова Татьяна Викторовна", hw: "" },
        { time: "09:40–11:10", subject: "История России", type: "лекция", room: "УЛК-1, ауд. 414", teacher: "доцент Бессонова Татьяна Викторовна", hw: "" },
        { time: "11:50–13:20", subject: "Инженерная компьютерная графика", type: "лекция", room: "УЛК-2, ауд. 341", teacher: "доцент Феоктистова Лидия Александровна", hw: "" }
      ],
      4: [
        { time: "08:00–09:30", subject: "Аналитическая геометрия", type: "лекция", room: "УЛК-2, ауд. 302", teacher: "доцент Костин А.В.", hw: "" },
        { time: "09:40–11:10", subject: "Аналитическая геометрия", type: "лекция", room: "УЛК-2, ауд. 302", teacher: "доцент Костин А.В.", hw: "" },
        { time: "11:50–13:20", subject: "Аналитическая геометрия", type: "лекция", room: "УЛК-2, ауд. 432", teacher: "доцент Костин А.В.", hw: "" }
      ],
      5: [
        { time: "08:00–09:30", subject: "Математический анализ", type: "практика", room: "УЛК-2, ауд. 432", teacher: "доцент Губочкина Наталья Ивановна", hw: "" },
        { time: "09:40–11:10", subject: "Математический анализ", type: "лекция", room: "УЛК-2, ауд. 302", teacher: "доцент Губочкина Наталья Ивановна", hw: "" },
        { time: "11:50–13:20", subject: "Информатика", type: "лекция", room: "УЛК-5, ауд. 305", teacher: "ст.преп. Булатова Светлана Владимировна", hw: "" },
        { time: "13:30–15:00", subject: "Программирование", type: "лекция", room: "УЛК-5, ауд. 308", teacher: "ст.преп. Булатова Светлана Владимировна", hw: "" }
      ],
      6: [
        { time: "08:00–09:30", subject: "Иностранный язык", type: "электронное обучение (практика)", room: "", teacher: "", hw: "" }
      ]
    }
  };

  const homeworkData = {
    "2025-10-03": [
      "Иностранный язык (1 подгр.): Unit 1, страница 19 — Английский ДЗ (Рабочая тетрадь)",
      "Информатика: Выполнить лабораторные работы по Excel за первый семестр"
    ]
  };

  // ===== ДАННЫЕ ЛЕКЦИЙ =====
const lecturesData = {
  "Физическая культура и спорт (практика)": [
    {
      title: "Лекция 1: Строевая подготовка 19.09.25",
      content: [
  {
    "type": "text",
    "content": "Общие положения:"
  },
  {
    "type": "text",
    "content": "<span class='highlight'>1. Строй</span> — установленное Уставом размещение военнослужащих (далее сокращённо в.сл.) подразделений и частей для их совместных действий в пешем порядке и на машинах."
  },
  {
    "type": "text",
    "content": "<span class='highlight'>2. Шеренга</span> — строй, в котором в.сл. размещены один возле другого на одной линии."
  },
  {
    "type": "text",
    "content": "<span class='highlight'>3. Фланг</span> — правая (левая) оконечность строя. При поворотах строя название флангов не изменяется."
  },
  {
    "type": "text",
    "content": "<span class='highlight'>4. Фронт</span> — сторона строя, в которую в.сл. обращены лицом."
  },
  {
    "type": "text",
    "content": "<span class='highlight'>5. Тыльная сторона строя</span> — сторона, противоположная фронту."
  },
  {
    "type": "text",
    "content": "<span class='highlight'>6. Интервал</span> — расстояние по фронту между в.сл., подразделениями и частями."
  },
  {
    "type": "text",
    "content": "<span class='highlight'>7. Дистанция</span> — расстояние в глубину между в.сл., подразделениями и частями."
  },
  {
    "type": "text",
    "content": "<span class='highlight'>8. Ширина строя</span> — расстояние между флангами."
  },
  {
    "type": "text",
    "content": "<span class='highlight'>9. Глубина строя</span> — расстояние от первой шеренги до последней шеренги."
  },
  {
    "type": "text",
    "content": "<span class='highlight'>10. Двушереножный строй</span> — в.сл. одной шеренги расположены в затылок в.сл. другой шеренги на дистанции одного шага (вытянутой руки, положенной ладонью на плечо впереди стоящего в.сл.)."
  },
  {
    "type": "text",
    "content": "<span class='highlight'>11. Колонна</span> — строй, в котором в.сл. расположены в затылок друг другу."
  },
  {
    "type": "text",
    "content": "<span class='highlight'>Только для парней</span>"
  },
  {
    "type": "text",
    "content": "<span class='highlight'>Обязанности солдата перед построением и в строю</span>"
  },
  {
    "type": "text",
    "content": "Перед построением солдат обязан:"
  },
  {
    "type": "text",
    "content": "1. Проверить исправность своего оружия, закреплённой за ним военной техники, боеприпасов, средств индивидуальной защиты, обмундирования и снаряжения. 2. Иметь аккуратную причёску. 3. Аккуратно заправить обмундирование. 4. Правильно надеть и пригнать снаряжение, помочь товарищу устранить замеченные недостатки."
  },
  {
    "type": "text",
    "content": "В строю он обязан: 1. Знать своё место. 2. Уметь быстро без суеты занять его. 3. В движении сохранять равнение, установленный интервал и дистанцию. Не выходить из строя без разрешения. 4. Без разрешения не разговаривать и соблюдать полную тишину. 5. Быть внимательным к приказам и командам своего командира, быстро и точно их выполнять, не мешая другим. 6. Будучи наблюдателем, передавать команды и сигналы без искажений, громко и чётко."
  },
  {
    "type": "text",
    "content": "<span class='highlight'>Для всех</span>"
  },
  {
    "type": "text",
    "content": "<span class='highlight'>Выполнение команд «Становись» — «Разойдись»</span>"
  },
  {
    "type": "text",
    "content": "- При получении команды «Становись» в.сл. быстро становится на своё место в строю и принимает строевую стойку. - При получении команды «Разойдись» в.сл. немедленно покидает своё место в строю."
  },
  {
    "type": "text",
    "content": "<span class='highlight'>Строевая стойка</span>"
  },
  {
    "type": "text",
    "content": "Для принятия строевой стойки необходимо: 1. Стать прямо без напряжения, каблуки поставить вместе, а носки развернуть по линии фронта на ширину ступни. 2. Ноги в коленях выпрямить, но не напрягать. 3. Грудь преподнять, а всё тело немного подать вперёд. 4. Живот подобрать. 5. Плечи развернуть. 6. Руки опустить так, чтобы кисти, обращённые ладонями внутрь, были сбоку и посередине бёдер, а пальцы полусогнуты и касались бедра. 7. Голову держать высоко и прямо. 8. Смотреть прямо перед собой. 9. Быть готовым к немедленному действию."
  },
  {
    "type": "text",
    "content": "Повороты на месте: выполняются по командам: «нале-во», «напра-во», «кру-гом». Нале, напра, кру — предварительные команды; во, го — исполнительные. При повороте направо вращаемся на пятке правой ноги и носке левой ноги на 90° в одноимённую сторону; налево (кругом) — на пятке левой ноги и носке правой на 90° (180°). Повороты выполняются на два счёта: раз-два. При выполнении поворотов сохраняется строевая стойка."
  },
  {
    "type": "text",
    "content": "<span class='highlight'>Движение строевым и походным шагом</span>"
  },
  {
    "type": "text",
    "content": "Строевой шаг применяется при: 1. Прохождении подразделения торжественным маршем. 2. Отдании чести в движении. 3. Подходе и отходе от начальника. 4. Выходе и возвращении в строй. 5. На строевых занятиях. При движении строевым шагом ногу, оттянутую вперёд носком, выносить на высоту 15–20 см от земли и ставить её твёрдо на всю ступню. Руками производить движения от плеча около тела вперёд — сгибая их в локтях так, чтобы кисти поднимались выше пряжки пояса на ширину ладони и на расстоянии ладонь от тела; назад — до отказа в плечевом суставе. Пальцы рук полусогнуты, корпус прямой, взгляд перед собой."
  },
  {
    "type": "text",
    "content": "Движение походным шагом начинается по команде «шагом марш». При движении ногу выносить свободно, не оттягивая носок, и ставить её на землю как при обычной ходьбе; руками производить свободные движения тела."
  }
]


    }
  ],
  "Химия": [
    {
      title: "Лекция 2: test",
      content: [
        { type: 'text', content: "1" },
        { type: 'image', url: "https://example.com/chem2-2.jpg" },

      ]
    }
  ]
};
  // ===== РЕНДЕР КОМПАКТНОГО РАСПИСАНИЯ =====
  function renderCompactSchedule(container, date) {
    const day = date.getDay();
    const weekType = getWeekType(date);
    const lessons = scheduleData[weekType]?.[day] || [];
    container.innerHTML = '';

    if (lessons.length === 0) {
      container.innerHTML = '<div class="lesson-card" style="text-align:center;color:#888;">Выходной 🌸</div>';
      return;
    }

    lessons.forEach(lesson => {
      const card = document.createElement('div');
      card.className = 'lesson-card';
      let cardHTML = `
        <div class="lesson-time"><i class="far fa-clock"></i> ${lesson.time}</div>
        <div class="lesson-title">${lesson.subject}</div>
        <div class="lesson-meta">${lesson.type} · ${lesson.room}</div>
        <div class="lesson-meta">${lesson.teacher}</div>
      `;

      if (lesson.hw) {
        const hwKey = `${formatDate(date)}|${lesson.hw}`;
        const isCompleted = getCompletedTasks()[hwKey] === true;
        cardHTML += `
          <button class="hw-toggle" data-hw-key="${hwKey}">
            ДЗ и решение <i class="fas fa-chevron-down"></i>
          </button>
          <div class="hw-content" style="display:none;">
            ${lesson.hw}
            <div class="hw-checkbox">
              <input type="checkbox" id="cb-${hwKey}" ${isCompleted ? 'checked' : ''}>
              <label for="cb-${hwKey}">Выполнено</label>
            </div>
          </div>
        `;
      }

      card.innerHTML = cardHTML;
      container.appendChild(card);

      if (lesson.hw) {
        const toggleBtn = card.querySelector('.hw-toggle');
        const hwContent = card.querySelector('.hw-content');
        const checkbox = card.querySelector('input[type="checkbox"]');

        toggleBtn.addEventListener('click', () => {
          if (hwContent.style.display === 'block') {
            hwContent.style.display = 'none';
            toggleBtn.innerHTML = 'ДЗ и решение <i class="fas fa-chevron-down"></i>';
          } else {
            hwContent.style.display = 'block';
            toggleBtn.innerHTML = 'Скрыть <i class="fas fa-chevron-up"></i>';
          }
        });

        checkbox?.addEventListener('change', (e) => {
          setCompletedTask(hwKey, e.target.checked);
        });
      }
    });
  }

  // ===== ПОЛНОЕ РАСПИСАНИЕ =====
  function renderFullSchedule() {
    const container = document.getElementById('full-schedule');
    container.innerHTML = '';

    const dayNames = ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'];
    const weeks = ['upper', 'lower'];
    const weekLabels = { upper: 'Верхняя неделя', lower: 'Нижняя неделя' };

    weeks.forEach(weekType => {
      const weekDiv = document.createElement('div');
      weekDiv.innerHTML = `<div class="schedule-week-header">${weekLabels[weekType]}</div>`;

      for (let day = 1; day <= 6; day++) {
        const lessons = scheduleData[weekType]?.[day] || [];
        if (lessons.length === 0) continue;

        const dayDiv = document.createElement('div');
        dayDiv.className = 'schedule-item';
        let html = `<h3>${dayNames[day]}</h3>`;

        lessons.forEach(lesson => {
          html += `<p><strong>${lesson.subject}</strong> (${lesson.type})<br>
                   <small>${lesson.time} · ${lesson.room} · ${lesson.teacher}</small></p>`;
        });

        dayDiv.innerHTML = html;
        weekDiv.appendChild(dayDiv);
      }

      container.appendChild(weekDiv);
    });
  }

  // ===== ДОМАШНЕЕ ЗАДАНИЕ =====
  function renderHomework() {
    const container = document.getElementById('homework-list');
    container.innerHTML = '';

    const sortedDates = Object.keys(homeworkData).sort((a, b) => new Date(b) - new Date(a));

    if (sortedDates.length === 0) {
      container.innerHTML = '<p style="text-align:center;color:#888;">Домашнее задание пока не добавлено.</p>';
      return;
    }

    sortedDates.forEach(dateStr => {
      const date = new Date(dateStr);
      const dayDiv = document.createElement('div');
      dayDiv.className = 'homework-date';
      let hwHtml = `<h3>${formatDate(date)}</h3>`;

      homeworkData[dateStr].forEach(hw => {
        const hwKey = `${dateStr}|${hw}`;
        const isCompleted = getCompletedTasks()[hwKey] === true;
        hwHtml += `
          <div class="homework-item">
            ${hw}
            <button class="solution-toggle" data-hw-key="${hwKey}">
              Решение <i class="fas fa-chevron-down"></i>
            </button>
            <div class="solution-content" style="display:none;">
              <div class="hw-checkbox">
                <input type="checkbox" id="sol-${hwKey}" ${isCompleted ? 'checked' : ''}>
                <label for="sol-${hwKey}">Выполнено</label>
              </div>
              <div style="margin-top:0.6rem; padding-top:0.6rem; border-top:1px solid var(--shadow);">
                <strong>Пример решения:</strong><br>
                1. [Пример решения — можно заменить]
              </div>
            </div>
          </div>
        `;
      });

      dayDiv.innerHTML = hwHtml;
      container.appendChild(dayDiv);

      dayDiv.querySelectorAll('.solution-toggle').forEach(btn => {
        const hwKey = btn.dataset.hwKey;
        const content = btn.nextElementSibling;
        const checkbox = content.querySelector('input[type="checkbox"]');

        btn.addEventListener('click', () => {
          if (content.style.display === 'block') {
            content.style.display = 'none';
            btn.innerHTML = 'Решение <i class="fas fa-chevron-down"></i>';
          } else {
            content.style.display = 'block';
            btn.innerHTML = 'Скрыть <i class="fas fa-chevron-up"></i>';
          }
        });

        checkbox?.addEventListener('change', (e) => {
          setCompletedTask(hwKey, e.target.checked);
        });
      });
    });
  }

  // ===== ЛЕКЦИИ =====
function renderLectures() {
    const container = document.getElementById('lectures-list');
    if (!container) {
      console.error('Контейнер для лекций не найден');
      return;
    }
    container.innerHTML = '';

    if (!lecturesData || typeof lecturesData !== 'object') {
      console.error('Данные лекций не определены или не являются объектом');
      return;
    }

    // Обработка всех предметов
    Object.keys(lecturesData).forEach(subject => {
      // Проверка наличия данных для предмета
      if (!lecturesData[subject] || !Array.isArray(lecturesData[subject])) {
        console.error(`Некорректные данные для предмета: ${subject}`);
        return;
      }

      // Создание карточки для предмета
      const card = document.createElement('div');
      card.className = 'lecture-subject-card';

      // Кнопка для раскрытия предмета
      const subjectToggleBtn = document.createElement('button');
      subjectToggleBtn.className = 'lecture-toggle';
      subjectToggleBtn.textContent = subject;
      subjectToggleBtn.dataset.subject = subject;

      // Список лекций по предмету
      const lectureList = document.createElement('div');
      lectureList.className = 'lecture-list';
      lectureList.id = `lectures-${subject.replace(/\s+/g, '-')}`;

      // Обработка каждой лекции
      lecturesData[subject].forEach(lecture => {
        // Проверка данных для лекции
        if (!lecture || typeof lecture !== 'object') {
          console.error('Некорректные данные лекции', lecture);
          return;
        }

        // Создаем карточку лекции
        const item = document.createElement('div');
        item.className = 'lecture-item';

        // Название лекции
        const title = document.createElement('span');
        title.className = 'lecture-title';
        title.textContent = lecture.title || 'Без названия';
        item.appendChild(title);

        // Кнопка "Подробнее"
        const detailsBtn = document.createElement('button');
        detailsBtn.className = 'lecture-details-toggle';
        detailsBtn.textContent = 'Подробнее';
        detailsBtn.addEventListener('click', () => {
          const currentLecture = item;
          const subjectContainer = item.closest('.lecture-subject-card');
          
          // Закрыть все другие лекции в этом предмете
          const allLectures = subjectContainer.querySelectorAll('.lecture-item');
          allLectures.forEach(lectureEl => {
            if (lectureEl !== currentLecture) {
              const details = lectureEl.querySelector('.lecture-details');
              const btn = lectureEl.querySelector('.lecture-details-toggle');
              if (details) details.style.display = 'none';
              if (btn) btn.textContent = 'Подробнее';
            }
          });

          // Переключить текущую лекцию
          const details = item.querySelector('.lecture-details');
          if (details) {
            if (details.style.display === 'none' || details.style.display === '') {
              details.style.display = 'block';
              detailsBtn.textContent = 'Скрыть';
            } else {
              details.style.display = 'none';
              detailsBtn.textContent = 'Подробнее';
            }
          }
        });

        item.appendChild(detailsBtn);

        // Детали лекции (много изображений + много текста)
        const details = document.createElement('div');
        details.className = 'lecture-details';
        details.style.display = 'none';

        // Обработка контента (изображения и текст)
        if (lecture.content && Array.isArray(lecture.content)) {
          lecture.content.forEach((element, index) => {
            // Обработка изображения
            if (element.type === 'image' && element.url) {
              const img = document.createElement('img');
              img.src = element.url.trim();
              img.alt = `${lecture.title} - изображение ${index + 1}`;
              img.loading = "lazy";
              img.style.maxWidth = "100%";
              img.style.borderRadius = "8px";
              img.style.marginTop = "8px";
              details.appendChild(img);
            }
            // Обработка текста
            else if (element.type === 'text' && element.content) {
              const p = document.createElement('p');
              p.className = `lecture-content-${index}`;
              p.innerHTML = element.content; // Важно использовать innerHTML
              p.style.marginTop = "8px";
              p.style.fontWeight = "500";
              p.style.fontSize = "0.95rem";
              details.appendChild(p);
            }
          });
        }

        item.appendChild(details);
        lectureList.appendChild(item);
      });

      // Обработчик для кнопки предмета
      subjectToggleBtn.addEventListener('click', () => {
        const isActive = lectureList.style.display === 'block';
        lectureList.style.display = isActive ? 'none' : 'block';
        subjectToggleBtn.classList.toggle('active', !isActive);
      });

      card.appendChild(subjectToggleBtn);
      card.appendChild(lectureList);
      container.appendChild(card);
    });
  }

  // ===== ДОПОЛНИТЕЛЬНЫЕ ИЗМЕНЕНИЯ =====
  // Добавляем CSS для выделения ключевых слов
  const style = document.createElement('style');
  style.textContent = `
    .lecture-details .highlight {
      font-weight: 700;
      color: var(--primary);
      margin: 0 3px;
    }
    .lecture-details p {
      margin-bottom: 12px;
    }
    .lecture-details p:last-child {
      margin-bottom: 0;
    }
  `;
  document.head.appendChild(style);

function isPasswordEntered() {
  return localStorage.getItem('lecturesPassword') === 'true';
}
  // ===== ИНИЦИАЛИЗАЦИЯ =====
  function init() {
    const now = getMoscowDate();
    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
    const tomorrow = addDays(today, 1);

    document.getElementById('today-header').textContent = `Сегодня — ${formatDate(today)}`;
    document.getElementById('tomorrow-header').textContent = `Завтра — ${formatDate(tomorrow)}`;

    renderCompactSchedule(document.getElementById('today-schedule'), today);
    renderCompactSchedule(document.getElementById('tomorrow-schedule'), tomorrow);
    renderFullSchedule();
    renderHomework();
    renderLectures();
      if (isPasswordEntered()) {
    document.getElementById('lectures').classList.add('active');
  } else {
    // Если пароль не введен - показываем форму ввода
    showPasswordForm();
  }
  }
function showPasswordForm() {
  const lecturesSection = document.getElementById('lectures');
  lecturesSection.innerHTML = `
    <div style="text-align: center; margin: 2rem 0; padding: 1.5rem; background: var(--card-bg); border-radius: var(--border-radius); box-shadow: var(--shadow);">
      <h2><i class="fas fa-lock"></i> Защищенная вкладка</h2>
      <p>Для доступа к лекциям введите пароль:</p>
      <div style="margin: 1.5rem 0;">
        <input type="password" id="lecturesPassword" placeholder="Пароль" style="padding: 0.8rem; border-radius: 8px; border: 1px solid var(--accent); font-size: 1.05rem; width: 180px; text-align: center;">
        <button id="lecturesSubmit" style="margin-left: 0.8rem; padding: 0.7rem 1.5rem; border-radius: 8px; background: var(--primary); color: white; border: none; font-weight: 600; cursor: pointer;">
          Войти
        </button>
      </div>
    </div>
  `;
  
  // Обработчик для кнопки входа
  document.getElementById('lecturesSubmit').addEventListener('click', function() {
    const password = document.getElementById('lecturesPassword').value;
    if (password === '8888') {
      // Сохраняем, что пароль введен
      localStorage.setItem('lecturesPassword', 'true');
      // Показываем лекции
      location.reload();
      renderLectures();
    } else {
      alert('Неверный пароль. Попробуйте еще раз.');
      document.getElementById('lecturesPassword').value = '';
      document.getElementById('lecturesPassword').focus();
    }
  });
  
  // Также добавим обработчик для клавиши Enter
  document.getElementById('lecturesPassword').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      document.getElementById('lecturesSubmit').click();
    }
  });
}
  // ===== НАВИГАЦИЯ =====
  document.querySelectorAll('.nav-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      btn.classList.add('active');
      const tab = btn.dataset.tab;
      document.getElementById(tab).classList.add('active');
    });
  });

  window.addEventListener('load', init);
  // ===== ПЕРЕКЛЮЧЕНИЕ НЕДЕЛЬ =====
let currentWeekView = 'upper'; // по умолчанию — верхняя

function renderFullSchedule(weekType = 'upper') {
  const container = document.getElementById('full-schedule');
  container.innerHTML = '';

  const dayNames = ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'];
  const lessons = scheduleData[weekType] || {};

  // Отображаем только дни с парами
  for (let day = 1; day <= 6; day++) {
    const dayLessons = lessons[day] || [];
    if (dayLessons.length === 0) continue;

    const dayDiv = document.createElement('div');
    dayDiv.className = 'schedule-item';
    let html = `<h3>${dayNames[day]}</h3>`;

    dayLessons.forEach(lesson => {
      html += `<p><strong>${lesson.subject}</strong> (${lesson.type})<br>
               <small>${lesson.time} · ${lesson.room} · ${lesson.teacher}</small></p>`;
    });

    dayDiv.innerHTML = html;
    container.appendChild(dayDiv);
  }

  // Обновляем активную кнопку
  document.getElementById('week-upper').classList.toggle('active', weekType === 'upper');
  document.getElementById('week-lower').classList.toggle('active', weekType === 'lower');
}

// Обработчики кнопок
document.getElementById('week-upper').addEventListener('click', () => {
  currentWeekView = 'upper';
  renderFullSchedule('upper');
});

document.getElementById('week-lower').addEventListener('click', () => {
  currentWeekView = 'lower';
  renderFullSchedule('lower');
});
</script>

</body>
</html>

